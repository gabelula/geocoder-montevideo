<!DOCTYPE html>
<html lang="es-UY">
  <head>
    <title>Geocoding Montevideo</title>
    <meta charset="utf8">
    <link href="http://fonts.googleapis.com/css?family=Lobster:regular&subset=cyrillic,latin" rel="stylesheet">
    <link href="/css/reset.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
  </head>
  <body>
    <h1>Geocoding Montevideo</h1>

    <section id="search">
      <form action="/geocode" method="get">
        <p><label for="address">Busca una dirección en Montevideo:</label></p>
        <p>
          <input autofocus type="text" name="address" id="address" value="<%= address %>">
          <button type="submit">Buscar</button>
        </p>
      </form>
    </section>

    <section id="results">
      <% if lat_long.exact_match? %>
        <dl>
          <dt>Latitud:</dt>
          <dd><%= lat_long.latitude %>&deg;N</dd>
          <dt>Longitud:</dt>
          <dd><%= lat_long.longitude %>&deg;E</dd>
        </dl>
      <% elsif address && address.size > 0 %>
        <p class="error">No encontramos la dirección "<%= address %>".</p>
      <% end %>
    </section>

    <section id="api-docs">
      <h2>API</h2>

      <p>Accede a esta página con el header <code>Accept: application/json</code>
        para obtener la respuesta en JSON. Por ejemplo:</p>

      <pre>$ curl -H "Accept: application/json" -G "http://<%= env["HTTP_HOST"] %>/geocode?address=18+de+julio+1860"
  { "response_code": "200",
    "latitude":      -34.90204,
    "longitude":     -56.17594,
    "address":       "18 de julio 1860" }</pre>

      <p>Cuando se encuentre la dirección en la base de datos el API retornará
        <strong><code>response_code: 200</code></strong>. Si la dirección no se
        encuentra, entonces se retornará <strong><code>response_code:
        404</code></strong>
    </section>
  </body>
</html>
